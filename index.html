<!DOCTYPE html>
<html>
<head>
    <title>Open HDFC Bank App</title>
</head>
<body>
    <script>
        function openApp() {
            const appScheme = "HdfcNowApp://"; // Custom app scheme
            const appStoreURL = "https://apps.apple.com/in/app/hdfc-bank-app-invite-only/id6504402552";
            let hasNavigated = false;

            // Create a fallback timer to redirect to the App Store
            const fallbackTimer = setTimeout(function () {
                if (!hasNavigated) {
                    hasNavigated = true;
                    window.location.href = appStoreURL; // Redirect to App Store
                }
            }, 1500); // Adjust the timeout as needed

            // Try to open the app via iframe
            const iframe = document.createElement("iframe");
            iframe.style.display = "none";
            iframe.src = appScheme;
            document.body.appendChild(iframe);

            // Listen for page visibility changes
            document.addEventListener("visibilitychange", function () {
                if (document.visibilityState === "hidden") {
                    clearTimeout(fallbackTimer); // Clear fallback if app launches
                }
            });

            // Clean up iframe after use
            setTimeout(function () {
                document.body.removeChild(iframe);
            }, 2000);
        }

        // Trigger the openApp function on page load
        window.onload = openApp;
    </script>
    <p>If you are not redirected, <a href="https://apps.apple.com/in/app/hdfc-bank-app-invite-only/id6504402552">click here</a>.</p>
</body>
</html>
